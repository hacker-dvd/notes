#### gdb 调试

**生成带有调试选项的可执行程序：**

`gcc -g test.c -o test`

**gdb 命令：**

1. 列出源码：`l 或者 list`

    如果想从第一行开始列出，使用`l 1`

2. 设置断点：`b`或者`break`

    例如：在第8行设置断点：`b 8`

3. 运行到断点所在行(断点行未运行)：`r`或者`run`

4. 继续向下执行：

    `n`(next)：进行下一个语句，若当前语句时一个函数，不会进入，会直接运行到下一阶段

    `s`(step)：按步执行，若当前语句是一个函数，会进入函数按顺序执行

5. `p`(print)：查看调试期间当前一个变量的值为多少

6. 跳到下一个断点：`continue`

7. 跳转到某一行：`until 行号`

8. `start` 从程序开始取调试，不用设置断点

9. `finish`结束当前函数调用，返回函数调用点

10. `set args xxx yyy ...`：设置 main 函数命令行参数

    也可以在 run 命令之后加上 main 的命令行参数：`run aaa bbb ccc`

11. `info b`：查看断点信息

12. 条件断点的设置：

    `b 20 if i = 5`：只有当 i = 5 时才作为断点停下

13. 查看变量类型：`ptype`

14. `bt`(backtrace)：查看函数的调用的栈帧和层级关系

15. `f`(frame)：切换函数的栈帧

    `f 编号`：跳到编号对应的栈帧空间

16. `display 变量名`：跟踪变量的值

    `undisplay 变量对应的编号`：取消跟踪变量的值

17. `d`(delete)：删除断点

注：**栈帧**：随着函数调用而在 stack 上开辟的一片内存空间，用于存放函数调用时产生的局部变量和临时值

注：当执行可执行程序出现：Segmentation fault (core dumped)，意味着出现段错误，此时如果想确定段错误的位置，可以打开 gdb，直接执行 run 命令，停下的位置即为段错误的位置

